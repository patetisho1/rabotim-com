# AI Test Analysis Helper Guide

## Как работи системата за автоматично анализиране на тестове

### Workflow:

1. **Тестовете се провалят в GitHub Actions**
   - GitHub Actions автоматично изпълнява тестовете при push
   - Анализира резултатите автоматично
   - Създава коментар в PR с анализ (ако е PR)

2. **Ти ми казваш:**
   ```
   тестовете се провалиха, провери ги
   ```
   или
   ```
   провери логовете от тестовете
   ```

3. **Аз правя:**
   - Чета `test-analysis-report.txt` или `playwright-report/`
   - Анализирам грешките
   - Идентифицирам проблемите
   - Поправям кода
   - Показвам ти промените
   - Питам: "Мога ли да пушна поправките?"

4. **Ти одобряваш:**
   - Проверяваш промените
   - Казваш "да" или "пушни"
   - Аз пушвам поправките

### Команди за локално тестване:

```bash
# Изпълни тестове и анализирай резултатите
npm run test:e2e:full

# Само анализирай последните резултати
npm run test:analyze

# Виж подробен отчет
npm run test:e2e:report
```

### Файлове които създава системата:

- `test-results.json` - JSON с резултатите от тестовете
- `test-analysis-report.txt` - Анализ на грешките с предложения
- `playwright-report/` - HTML отчет със скрийншоти и видеа
- `test-results/` - Скрийншоти и trace файлове от всеки тест

### Примери за коментари към AI:

1. **Просто анализ:**
   ```
   тестовете се провалиха, провери ги
   ```

2. **С конкретен файл:**
   ```
   провери test-analysis-report.txt
   ```

3. **С конкретен тест:**
   ```
   тестът auth.spec.ts се провали, провери го
   ```

4. **С позволение за поправка:**
   ```
   тестовете се провалиха, провери и поправи ги (с позволение за push)
   ```

5. **Без позволение (само анализ):**
   ```
   тестовете се провалиха, анализирай но не push-вай
   ```

### Как AI анализира грешките:

- ✅ **Timeout грешки** → Увеличава timeout или проверява за бавни заявки
- ✅ **Element not found** → Проверява селектори и conditional rendering
- ✅ **Navigation грешки** → Проверява URL-и и redirects
- ✅ **Auth грешки** → Проверява credentials и session
- ✅ **Network грешки** → Проверява API endpoints и CORS

### Типове поправки които AI прави:

1. **Поправя селектори** - Актуализира селектори ако UI се променя
2. **Добавя/премахва timeouts** - Оптимизира времето за изчакване
3. **Поправя navigation** - Коригира URL-и и очаквания за навигация
4. **Поправя helpers** - Актуализира helper функции ако UI се променя
5. **Добавя retry логика** - Добавя retry за нестабилни тестове

### Safety Features:

- ✅ AI винаги пита преди push
- ✅ Показва всички промени преди push
- ✅ Не прави промени без позволение
- ✅ Запазва стара версия на тестовете

### За CI/CD:

GitHub Actions автоматично:
- Изпълнява тестове
- Анализира резултати
- Създава коментар в PR с анализ
- Качва artifacts с резултати

Ти само трябва да:
- Преглеждаш коментара в PR
- Ми казваш "провери ги" ако има грешки
- Одобряваш поправките

