# üîß CI/CD Test Setup Guide

**–î–∞—Ç–∞:** $(Get-Date -Format "yyyy-MM-dd")
**–°—Ç–∞—Ç—É—Å:** –í –ø—Ä–æ—Ü–µ—Å –Ω–∞ –ø–æ–¥–æ–±—Ä–µ–Ω–∏–µ

---

## üìã –ò–∑–∏—Å–∫–≤–∞–Ω–∏—è –∑–∞ GitHub Actions

### Environment Variables (GitHub Secrets)

–¢–µ—Å—Ç–æ–≤–µ—Ç–µ –∏–∑–∏—Å–∫–≤–∞—Ç —Å–ª–µ–¥–Ω–∏—Ç–µ environment variables –¥–∞ –±—ä–¥–∞—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏ –≤ GitHub Secrets:

#### 1. TEST_USER_EMAIL
- **–û–ø–∏—Å–∞–Ω–∏–µ:** Email –Ω–∞ —Ç–µ—Å—Ç–æ–≤ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª –∑–∞ authentication —Ç–µ—Å—Ç–æ–≤–µ
- **–ü—Ä–∏–º–µ—Ä:** `test-user@example.com`
- **–ò–∑–∏—Å–∫–≤–∞–Ω–µ:** ‚ö†Ô∏è –ó–∞–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–æ –∑–∞ —Ç–µ—Å—Ç–æ–≤–µ, –∫–æ–∏—Ç–æ –∏–∑–∏—Å–∫–≤–∞—Ç login

#### 2. TEST_USER_PASSWORD
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–∞—Ä–æ–ª–∞ –Ω–∞ —Ç–µ—Å—Ç–æ–≤ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª
- **–ü—Ä–∏–º–µ—Ä:** `TestPassword123!`
- **–ò–∑–∏—Å–∫–≤–∞–Ω–µ:** ‚ö†Ô∏è –ó–∞–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–æ –∑–∞ —Ç–µ—Å—Ç–æ–≤–µ, –∫–æ–∏—Ç–æ –∏–∑–∏—Å–∫–≤–∞—Ç login

#### 3. PLAYWRIGHT_TEST_BASE_URL (–û–ø—Ü–∏–æ–Ω–∞–ª–Ω–æ)
- **–û–ø–∏—Å–∞–Ω–∏–µ:** Base URL –∑–∞ —Ç–µ—Å—Ç–æ–≤–µ—Ç–µ
- **–ü–æ –ø–æ–¥—Ä–∞–∑–±–∏—Ä–∞–Ω–µ:** `http://localhost:3000`
- **–ò–∑–∏—Å–∫–≤–∞–Ω–µ:** ‚ö†Ô∏è –ù–µ –µ –∑–∞–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–æ - –∏–∑–ø–æ–ª–∑–≤–∞ —Å–µ –ø—Ä–∏ —Ç–µ—Å—Ç–≤–∞–Ω–µ –Ω–∞ staging/production

---

## üîß –ö–∞–∫ –¥–∞ –Ω–∞—Å—Ç—Ä–æ–∏—à GitHub Secrets

### –°—Ç—ä–ø–∫–∞ 1: –û—Ç–∏–¥–∏ –≤ GitHub Settings
1. –û—Ç–≤–æ—Ä–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è: `https://github.com/patetisho1/rabotim-com`
2. –ö–ª–∏–∫–Ω–∏ –Ω–∞ **Settings**
3. –í –ª—è–≤–æ—Ç–æ –º–µ–Ω—é –∫–ª–∏–∫–Ω–∏ –Ω–∞ **Secrets and variables** ‚Üí **Actions**

### –°—Ç—ä–ø–∫–∞ 2: –î–æ–±–∞–≤–∏ Secrets
–ö–ª–∏–∫–Ω–∏ –Ω–∞ **New repository secret** –∏ –¥–æ–±–∞–≤–∏:

1. **Name:** `TEST_USER_EMAIL`
   - **Value:** Email –Ω–∞ —Ç–µ—Å—Ç–æ–≤ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª
   - **–ü—Ä–∏–º–µ—Ä:** `test-user@example.com`

2. **Name:** `TEST_USER_PASSWORD`
   - **Value:** –ü–∞—Ä–æ–ª–∞ –Ω–∞ —Ç–µ—Å—Ç–æ–≤ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª
   - **–ü—Ä–∏–º–µ—Ä:** `TestPassword123!`

3. **Name:** `PLAYWRIGHT_TEST_BASE_URL` (–û–ø—Ü–∏–æ–Ω–∞–ª–Ω–æ)
   - **Value:** URL –Ω–∞ staging —Å—Ä–µ–¥–∞ (–∞–∫–æ —Ç–µ—Å—Ç–≤–∞—à staging)
   - **–ü—Ä–∏–º–µ—Ä:** `https://rabotim-com-staging.vercel.app`

### –°—Ç—ä–ø–∫–∞ 3: –ü—Ä–æ–≤–µ—Ä–∏ Secrets
–°–ª–µ–¥ –∫–∞—Ç–æ –¥–æ–±–∞–≤–∏—à secrets:
1. –í `.github/workflows/playwright.yml` —Ç–µ —Å–∞ –¥–æ—Å—Ç—ä–ø–Ω–∏ –∫–∞—Ç–æ `${{ secrets.TEST_USER_EMAIL }}`
2. Workflow —â–µ –≥–∏ –∏–∑–ø–æ–ª–∑–≤–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—Ä–∏ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ –Ω–∞ —Ç–µ—Å—Ç–æ–≤–µ—Ç–µ

---

## üß™ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –Ω–∞ —Ç–µ—Å—Ç–æ–≤ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª

### –í–∞–∂–Ω–æ:
–¢–µ—Å—Ç–æ–≤–µ—Ç–µ –∏–∑–∏—Å–∫–≤–∞—Ç —Ä–µ–∞–ª–µ–Ω –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª –≤ Supabase –±–∞–∑–∞—Ç–∞ –¥–∞–Ω–Ω–∏. 

### –°—Ç—ä–ø–∫–∞ 1: –°—ä–∑–¥–∞–π —Ç–µ—Å—Ç–æ–≤ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª
1. –û—Ç–∏–¥–∏ –≤ Supabase Dashboard ‚Üí **Authentication** ‚Üí **Users**
2. –°—ä–∑–¥–∞–π –Ω–æ–≤ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª:
   - **Email:** `test-user@example.com` (–∏–ª–∏ –∫–∞–∫–≤–æ—Ç–æ —Å–∏ –∑–∞–¥–∞–ª –≤ TEST_USER_EMAIL)
   - **Password:** `TestPassword123!` (–∏–ª–∏ –∫–∞–∫–≤–æ—Ç–æ —Å–∏ –∑–∞–¥–∞–ª –≤ TEST_USER_PASSWORD)
   - ‚ö†Ô∏è –£–±–µ–¥–∏ —Å–µ —á–µ email confirmation –µ –æ—Ç–∫–ª—é—á–µ–Ω–æ –∏–ª–∏ –ø–æ—Ç–≤—ä—Ä–¥–∏ email —Ä—ä—á–Ω–æ

### –°—Ç—ä–ø–∫–∞ 2: –ü—Ä–æ–≤–µ—Ä–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è
1. –í–ª–µ–∑ —Å —Ç–µ—Å—Ç–æ–≤–∏—Ç–µ credentials –≤ staging/local
2. –£–±–µ–¥–∏ —Å–µ —á–µ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è—Ç –º–æ–∂–µ –¥–∞ –≤–ª–µ–∑–µ –∏ –∏–º–∞ –¥–æ—Å—Ç—ä–ø –¥–æ –æ—Å–Ω–æ–≤–Ω–∏ —Ñ—É–Ω–∫—Ü–∏–∏

### –°—Ç—ä–ø–∫–∞ 3: –¢–µ—Å—Ç–≤–∞–π –ª–æ–∫–∞–ª–Ω–æ
```bash
# Set environment variables
export TEST_USER_EMAIL=test-user@example.com
export TEST_USER_PASSWORD=TestPassword123!

# Run tests
npm run test:e2e
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω–∏ –ë–µ–ª–µ–∂–∫–∏

### 1. Email Confirmation
- –ê–∫–æ email confirmation –µ –∏–∑–∏—Å–∫–≤–∞–Ω–æ –≤ Supabase, —Ç–µ—Å—Ç–æ–≤–µ—Ç–µ –º–æ–∂–µ –¥–∞ —Å–µ –ø—Ä–æ–≤–∞–ª—è—Ç
- **–†–µ—à–µ–Ω–∏–µ:** –û—Ç–∫–ª—é—á–∏ email confirmation –∑–∞ —Ç–µ—Å—Ç–æ–≤–∏—è –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª –∏–ª–∏ –ø–æ—Ç–≤—ä—Ä–¥–∏ email —Ä—ä—á–Ω–æ

### 2. Test Data Cleanup
- –¢–µ—Å—Ç–æ–≤–µ—Ç–µ –º–æ–≥–∞—Ç –¥–∞ —Å—ä–∑–¥–∞–≤–∞—Ç –¥–∞–Ω–Ω–∏ –≤ –±–∞–∑–∞—Ç–∞
- **–ü—Ä–µ–ø–æ—Ä—ä–∫–∞:** –ò–∑–ø–æ–ª–∑–≤–∞–π –æ—Ç–¥–µ–ª–Ω–∞ —Ç–µ—Å—Ç–æ–≤–∞ –±–∞–∑–∞ –¥–∞–Ω–Ω–∏ –∏–ª–∏ cleanup —Å–ª–µ–¥ —Ç–µ—Å—Ç–æ–≤–µ

### 3. Rate Limiting
- –ê–∫–æ –∏–º–∞ rate limiting, —Ç–µ—Å—Ç–æ–≤–µ—Ç–µ –º–æ–∂–µ –¥–∞ —Å–µ –ø—Ä–æ–≤–∞–ª—è—Ç –ø—Ä–∏ –º–Ω–æ–≥–æ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏—è
- **–ü—Ä–µ–ø–æ—Ä—ä–∫–∞:** –£–≤–µ–ª–∏—á–∏ rate limits –∑–∞ —Ç–µ—Å—Ç–æ–≤–æ API –∏–ª–∏ –∏–∑–ø–æ–ª–∑–≤–∞–π staging —Å—Ä–µ–¥–∞

### 4. Test Isolation
- –¢–µ—Å—Ç–æ–≤–µ—Ç–µ —Ç—Ä—è–±–≤–∞ –¥–∞ —Å–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º–∏
- –í—Å–µ–∫–∏ —Ç–µ—Å—Ç —Ç—Ä—è–±–≤–∞ –¥–∞ —Ä–∞–±–æ—Ç–∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –¥—Ä—É–≥–∏—Ç–µ

---

## üîç Troubleshooting

### –ü—Ä–æ–±–ª–µ–º 1: –¢–µ—Å—Ç–æ–≤–µ—Ç–µ —Å–µ –ø—Ä–æ–≤–∞–ª—è—Ç —Å "Invalid credentials"
**–ü—Ä–∏—á–∏–Ω–∞:** TEST_USER_EMAIL –∏–ª–∏ TEST_USER_PASSWORD –Ω–µ —Å–∞ –ø—Ä–∞–≤–∏–ª–Ω–∏
**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏ —á–µ secrets —Å–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏ –ø—Ä–∞–≤–∏–ª–Ω–æ –≤ GitHub
2. –ü—Ä–æ–≤–µ—Ä–∏ —á–µ —Ç–µ—Å—Ç–æ–≤–∏—è –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª —Å—ä—â–µ—Å—Ç–≤—É–≤–∞ –≤ Supabase
3. –ü—Ä–æ–≤–µ—Ä–∏ —á–µ email confirmation –µ –ø–æ—Ç–≤—ä—Ä–¥–µ–Ω

### –ü—Ä–æ–±–ª–µ–º 2: –¢–µ—Å—Ç–æ–≤–µ—Ç–µ —Å–µ –ø—Ä–æ–≤–∞–ª—è—Ç —Å "Cannot find module"
**–ü—Ä–∏—á–∏–Ω–∞:** Next.js build –ø—Ä–æ–±–ª–µ–º
**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏ —á–µ `npm ci` –º–∏–Ω–∞–≤–∞ —É—Å–ø–µ—à–Ω–æ
2. –ü—Ä–æ–≤–µ—Ä–∏ —á–µ –≤—Å–∏—á–∫–∏ dependencies —Å–∞ –∏–Ω—Å—Ç–∞–ª–∏—Ä–∞–Ω–∏
3. –ü—Ä–æ–≤–µ—Ä–∏ –∑–∞ build errors –≤ –ª–æ–≥–æ–≤–µ—Ç–µ

### –ü—Ä–æ–±–ª–µ–º 3: Web Server –Ω–µ —Å—Ç–∞—Ä—Ç–∏—Ä–∞
**–ü—Ä–∏—á–∏–Ω–∞:** Next.js dev server –Ω–µ –º–æ–∂–µ –¥–∞ —Å—Ç–∞—Ä—Ç–∏—Ä–∞
**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏ –ª–æ–≥–æ–≤–µ—Ç–µ –Ω–∞ web server
2. –ü—Ä–æ–≤–µ—Ä–∏ –∑–∞ port conflicts (3000)
3. –ü—Ä–æ–≤–µ—Ä–∏ environment variables

### –ü—Ä–æ–±–ª–µ–º 4: –¢–µ—Å—Ç–æ–≤–µ—Ç–µ —Å–∞ flaky (–ø—Ä–æ–≤–∞–ª—è—Ç —Å–µ –ø–æ–Ω—è–∫–æ–≥–∞)
**–ü—Ä–∏—á–∏–Ω–∞:** Timing issues –∏–ª–∏ network problems
**–†–µ—à–µ–Ω–∏–µ:**
1. –£–≤–µ–ª–∏—á–∏ timeouts –≤ —Ç–µ—Å—Ç–æ–≤–µ—Ç–µ
2. –î–æ–±–∞–≤–∏ retry –ª–æ–≥–∏–∫–∞
3. –ü—Ä–æ–≤–µ—Ä–∏ network stability

---

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ Test Results

### GitHub Actions
1. –û—Ç–∏–¥–∏ –≤ **Actions** tab –≤ GitHub
2. –ö–ª–∏–∫–Ω–∏ –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—è workflow run
3. –ü—Ä–æ–≤–µ—Ä–∏ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏—Ç–µ –æ—Ç **test** job
4. Download artifacts –∑–∞ –¥–µ—Ç–∞–π–ª–Ω–∏ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏

### –õ–æ–∫–∞–ª–Ω–æ
```bash
# Run tests
npm run test:e2e

# View HTML report
npm run test:e2e:report

# Run with UI
npm run test:e2e:ui
```

---

## ‚úÖ Checklist

–ü—Ä–µ–¥–∏ –¥–∞ push-–Ω–µ—à –ø—Ä–æ–º–µ–Ω–∏:
- [ ] TEST_USER_EMAIL –µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ GitHub Secrets
- [ ] TEST_USER_PASSWORD –µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ GitHub Secrets
- [ ] –¢–µ—Å—Ç–æ–≤–∏—è –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª —Å—ä—â–µ—Å—Ç–≤—É–≤–∞ –≤ Supabase
- [ ] –¢–µ—Å—Ç–æ–≤–µ—Ç–µ –º–∏–Ω–∞–≤–∞—Ç –ª–æ–∫–∞–ª–Ω–æ
- [ ] –ù—è–º–∞ flaky tests

---

## üîó –ü–æ–ª–µ–∑–Ω–∏ –õ–∏–Ω–∫–æ–≤–µ

- **GitHub Actions:** https://github.com/patetisho1/rabotim-com/actions
- **Playwright Docs:** https://playwright.dev/
- **Test Helpers:** `tests/e2e/helpers/`
- **Test Config:** `playwright.config.ts`

